**OBSOLETE** This module is merged by [vim-jp/vital.vim](https://github.com/vim-jp/vital.vom). Use vital.Vim.WindowLayout.

vital-layout
========================================================================================================================
vim用のレイアウトマネージャ。
仕様が固まったら [vital.vim](https://github.com/vim-jp/vital.vim) にPull Requestするので、このリポジトリはいつか消されます。

できること
------------------------------------------------------------------------------------------------------------------------
vimのウィンドウをレイアウトします。

関数
------------------------------------------------------------------------------------------------------------------------
* new()

    新しいWindowLayoutオブジェクトを生成する。

* {WindowLayout}.apply({buffers}, {layoutdata})

    後述するレイアウト設定を引数として渡し、ウィンドウのレイアウトを行う。
    またレイアウトされた各ウィンドウに対して、buffersに渡されたバッファを配置する。

    * buffers - バッファ情報のリスト。バッファ情報は以下の属性を持つ辞書です。

        * id (required) - バッファのID。レイアウト設定内で参照するために用いられる

        * bufname (default: '') - バッファが新規に開かれる場合に設定されるバッファ名

        * range (default: 'tabpage') - Vital.Vim.BufferManager.config()と同様

        * bufnr (default: -) - この属性にバッファ番号を設定している場合、既存のバッファをレイアウトする

        * initializer (default: -) - バッファの初期化時に呼ばれる関数を設定することができる。funcrefか、[funcref, dict]のどちらかで指定する

    * layoutdata - レイアウト情報を詰めた辞書。この辞書内で、buffersに渡したバッファ情報を参照することができる。詳細は後述。

* {WindowLayout}.winnr({walias})

    layoutdata中に"walias"を設定した場合、この関数に設定した"walias"を渡すことでウィンドウ番号を取得することができる。
    "walias"が見つからない場合、-1を返す。

レイアウト設定
------------------------------------------------------------------------------------------------------------------------
レイアウト設定を行うには、辞書を用いる。
この辞書には2種類の設定値が含まれる。

1. メタ情報

    レイアウト後にウィンドウを参照したり、他の関数を使用するための情報。
    メタ情報には以下のものがある。

    * walias

        {WindowLayout}.winnr({walias})を使用するためのメタ情報。
        waliasは辞書内 (含ネスト) でユニークである必要がある。

1. レイアウト情報

    レイアウトに関わる情報。レイアウト情報については、使用するレイアウトマネージャによって設定方法が異なる。
    使用するレイアウトマネージャは、"layout"という属性で指定する。
    レイアウトマネージャ毎の属性値については、それぞれ専用の章を設けて説明する。

    * layout

        使用するレイアウトマネージャを指定する。
        現状は"border"のみ指定可能。

BorderLayout
------------------------------------------------------------------------------------------------------------------------
"layout"に"border"を指定すると、BorderLayoutを使用することができる。
BorderLayoutは、カレントウィンドウ (トップレベルではタブページ) を以下のような5つの領域に分割し、ウィンドウを配置していく。

    +----------------------------------------------------------------------------------------+
    |                                                                                        |
    |                                                                                        |
    |                                         NORTH                                          |
    |                                                                                        |
    |                                                                                        |
    +-----------------------------+----------------------------+-----------------------------+
    |                             |                            |                             |
    |                             |                            |                             |
    |            WEST             |           CENTER           |            EAST             |
    |                             |                            |                             |
    |                             |                            |                             |
    +-----------------------------+----------------------------+-----------------------------+
    |                                                                                        |
    |                                                                                        |
    |                                         SOUTH                                          |
    |                                                                                        |
    |                                                                                        |
    +----------------------------------------------------------------------------------------+

レイアウト情報は以下の属性を持てる。

* bufref - buffersに渡したバッファ情報のid

* width  - ウィンドウの幅。絶対指定(e.g.30)と相対指定(e.g.0.3)が可能。

* height - ウィンドウの高さ。絶対指定(e.g.30)と相対指定(e.g.0.3)が可能。

### 例

```vim:
let g:layout= vital#of('vital').import('Window.Layout').new()
call g:layout.apply(
\   [
\       {'id': 'hoge', 'bufname': 'HOGE'},
\       {'id': 'fuga', 'bufname': 'FUGA'},
\       {'id': 'piyo', 'bufname': 'PIYO'},
\   ],
\   {
\       'layout': 'border',
\       'north':  {'bufref': 'hoge', 'height': 0.5, 'walias': 'one'},
\       'center': {'bufref': 'fuga', 'width': 0.8, 'walias': 'two'},
\       'east':   {
\           'layout': 'border',
\           'north':  {'bufref': 'piyo', 'walias': 'three'},
\           'center': {'bufref': 'piyo', 'walias': 'four'},
\           'south':  {'bufref': 'piyo', 'walias': 'five'},
\       },
\   }
\)
```

![](https://kamichidu.github.io/vital-layout/example00.gif)
